"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var _slicedToArray=function(){function e(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?module.exports=t():"function"==typeof define&&define.amd?define("timer",[],t):e.timer=t()}(void 0,function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},{id:o.getStamp()+"",func:function(){},param:"",delay:0,interval:1e3,time:null},e);return t.delay=parseInt(t.delay),isNaN(t.delay)&&(t.delay=0),t.interval=parseInt(t.interval),(isNaN(t.interval)||t.interval<0)&&(t.interval=1e3),t}function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};setTimeout(function(){e.func(e.param)},e.delay)}function n(){return/^([0-1]\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}function r(){return/^[1-2]\d{3}-(0?[1-9]||1[0-2])-(0?[1-9]||[1-2][1-9]||3[0-1])$/.test(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}var a=[],i={},o={getYear:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=(new Date).getFullYear();return 1*(e?t:t.toString().substr(2))},getMonth:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=(new Date).getMonth()+1;return e&&t<10&&(t="0"+t),t},getDate:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=(new Date).getDate();return e&&t<10&&(t="0"+t),t},getYearMonth:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n=new Date,r=n.getFullYear(),a=n.getMonth()+1;return e&&a<10&&(a="0"+a),""+r+t+a},getYearMonthDate:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n=new Date,r=n.getFullYear(),a=n.getMonth()+1,i=n.getDate();return e&&(a<10&&(a="0"+a),i<10&&(i="0"+i)),""+r+t+a+t+i},getDateTime:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:":",a=new Date,i=a.getFullYear(),o=a.getMonth()+1,u=a.getDate(),c=a.getHours(),f=a.getMinutes(),s=a.getSeconds();return e&&(o<10&&(o="0"+o),u<10&&(u="0"+u)),n&&(c<10&&(c="0"+c),f<10&&(f="0"+f),s<10&&(s="0"+s)),""+i+t+o+t+u+" "+c+r+f+r+s},getTime:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:":",n=new Date,r=n.getHours(),a=n.getMinutes(),i=n.getSeconds();return e&&(r<10&&(r="0"+r),a<10&&(a="0"+a),i<10&&(i="0"+i)),""+r+t+a+t+i},getHours:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=(new Date).getHours();return e&&t<10&&(t="0"+t),t},getMinutes:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=(new Date).getMinutes();return e&&t<10&&(t="0"+t),t},getSeconds:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=(new Date).getMinutes();return e&&t<10&&(t="0"+t),t},getStamp:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=(new Date).getTime();return e?t:parseInt(t/1e3)},getWeek:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=[["周一","周二","周三","周四","周五","周六","周天"],["星期一","星期二","星期三","星期四","星期五","星期六","星期天"],["礼拜一","礼拜二","礼拜三","礼拜四","礼拜五","礼拜六","礼拜天"],["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],["Mon","Tue","Wed","Thur","Fri","Sat","Sun"]],n=(new Date).getDay();return e=parseInt(e),(isNaN(e)||e<0||e>4)&&(e=0),t[e][n-1]},getDiff:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=e.toString().length;if(t<10)return"刚刚";var n=t>11,r=o.getStamp(n),a=parseInt((r-e)/(n?1e3:1)),i="刚刚";if(a<=60&&(i="刚刚"),a>60&&a<=3600&&(i=(Math.ceil(a/60)||1)+"分钟前"),a>3600&&a<=86400&&(i=Math.ceil(a/3600)+"小时前"),a>86400&&a<=604800&&(i=Math.ceil(a/86400)+"天前"),a>604800){var u=new Date(e*(n?1:1e3)),c=u.getFullYear(),f=u.getMonth(),s=u.getDate();f<10&&(f="0"+f),s<10&&(s="0"+s),i=c+"-"+f+"-"+s}return i},tasks:[],start:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];o.reset=e,a.forEach(function(e){return clearTimeout(e)}),a=[];var i=setTimeout(function(){return o.start(e)},1e3);a.push(i),o.tasks.forEach(function(e){if(e.delay>0)t(e);else{if(e.time){var a=o.getDateTime(),i=e.time.split(" "),u=_slicedToArray(i,2),c=u[0],f=u[1];return r(c)&&n(f)&&a==e.time&&e.func(e.param),r(c)&&!n(f)&&a==e.time+" 00:00:00"&&e.func(e.param),void(n(c)&&a.split(" ")[1]==e.time&&e.func(e.param))}if(e.execTime){var s=o.getStamp();s-e.execTime>=e.interval&&(e.func(e.param),e.execTime=s)}else e.func(e.param),e.execTime=o.getStamp()}})},remove:function(e){e instanceof Array?o.tasks=o.tasks.filter(function(t){return!e.includes(t.id)}):o.tasks=o.tasks.filter(function(t){return t.id!=e})},clear:function(){o.tasks=[]},delay:function(n){n instanceof Array?n.forEach(function(n){t(e(n))}):n instanceof Object&&t(e(n))},chain:function(t){if(o.reset&&o.clear(),t instanceof Array){var n;(n=o.tasks).push.apply(n,_toConsumableArray(t.map(function(t){return e(t)})))}else t instanceof Object&&o.tasks.push(e(t))},countdown:function(e){function t(e,t){var r=i[e];n(t,r.change,r.done);var a=setInterval(function(){if(t<=0)return clearInterval(a);t--,r.current=t,n(t,u,c)},1e3);r.timer=a}function n(e,t,n){var r=e,a=0,i=0,o=0,u=0,c={day:86400,hour:3600,minute:60};r>=c.day&&(a=parseInt(r/c.day),r-=a*c.day),r>=c.hour&&r<c.day&&(i=parseInt(r/c.hour),r-=i*c.hour),r>=c.minute&&r<c.hour&&(o=parseInt(r/c.minute),r-=o*c.minute),r<c.minute&&(u=r),i<10&&(i="0"+i),o<10&&(o="0"+o),u<10&&(u="0"+u),t instanceof Function&&t({days:a,hours:i,minutes:o,seconds:u}),a+i+o+u<=0&&n instanceof Function&&n()}var r=e.id||o.getStamp().toString(),a=e.seconds||0,u=e.change||function(){},c=e.done||function(){};return a=parseInt(a),a=isNaN(a)?0:a,i[r]={input:a,current:a,change:u,done:c},i[r].timer&&clearInterval(i[r].timer),i[r].pause=function(){clearInterval(i[r].timer)},i[r].start=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;i[r].pause(),t(r,e||i[r].current)},i[r].restart=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;i[r].pause(),t(r,e||i[r].input)},t(r,a),i[r]}};return o});